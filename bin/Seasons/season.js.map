{"version":3,"sources":["Seasons/season.es6"],"names":[],"mappings":"AAAA;;;;AAIA;;AAEA,IAAM,OAAO,QAAQ,MAAR,CAAb;AACA,IAAM,UAAU,QAAQ,SAAR,CAAhB;AACA,IAAM,SAAS,QAAQ,QAAR,CAAf;;eAEoB,QAAQ,WAAR,C;;IAAb,S,YAAA,S;;AACP,IAAM,QAAQ,QAAQ,eAAR,CAAd;AACA,IAAM,UAAU,QAAQ,qBAAR,CAAhB;;AAEA,SAAS,MAAT,CAAgB,QAAhB,EAA0B,MAA1B,EAAkC,IAAlC,EAAwC;AACpC,QAAI,EAAE,gBAAgB,MAAlB,CAAJ,EAA+B;AAC3B,eAAO,IAAI,MAAJ,CAAW,QAAX,EAAqB,IAArB,CAAP;AACH;;AAED,WAAO,MAAP,CAAc,IAAd,CAAmB,IAAnB;;AAEA,SAAK,QAAL,GAAgB,QAAhB;AACA,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,IAAL,GAAY,IAAZ;;AAEA,WAAO,IAAP;AACH;;AAED,KAAK,QAAL,CAAc,MAAd,EAAsB,MAAtB;;AAEA,OAAO,gBAAP,CAAwB,OAAO,SAA/B,EAA0C;AACtC,gBAAY;AACR,iBAAS,eAAS,QAAT,EAAmB;AAAA;;AACxB,gBAAI,cAAc,OAAO,MAAP,CAAc,EAAd,EAAkB,UAAU,GAA5B,EAAiC;AAC/C,uBAAO,UAAU,GAAV,CAAc,OAAd,CAAsB,GAAtB,UAAiC,KAAK,MAAL,CAAY,GAAZ,CAAgB,IAAhB,CAAjC,gBAAiE,KAAK,GAAL,CAAS,eAAT,CAAjE,CADwC;AAE/C,sBAAM,OAAO,MAAP,CAAc,EAAd,EAAkB,EAAE,WAAW,KAAK,QAAL,CAAc,MAA3B,EAAlB;AAFyC,aAAjC,CAAlB;;AAKA,kBAAM,OAAN,CAAc,GAAd,EAAmB,UAAC,QAAD,EAAc;AAC7B,wBAAQ,WAAR,EAAqB,UAAC,KAAD,EAAQ,QAAR,EAAkB,IAAlB,EAA2B;AAC5C,wBAAI,KAAJ,EAAW;AACP,+BAAO,SAAS,KAAT,CAAP;AACH;;AAED,0BAAK,IAAL,GAAY,KAAK,KAAL,CAAW,IAAX,CAAZ;AACA,wBAAI,WAAW,MAAK,IAAL,CAAU,QAAzB;;AAEA,wBAAI,OAAO,OAAP,CAAe,QAAf,CAAJ,EAA8B;AAC1B,8BAAK,IAAL,CAAU,QAAV,GAAqB,SAAS,GAAT,CAAa,UAAC,IAAD;AAAA,mCAAU,IAAI,OAAJ,CAAY,MAAK,QAAjB,SAAiC,IAAjC,CAAV;AAAA,yBAAb,CAArB;AACH;;AAED,2BAAO,SAAS,IAAT,QAAP;AACH,iBAbD;AAcH,aAfD,EAeG,QAfH;AAgBH;AAvBO,KAD0B;;AA2BtC,WAAO;AACH,iBAAS,eAAS,EAAT,EAAa;AAClB,gBAAI,MAAM,KAAK,IAAf,EAAqB;AACjB,uBAAO,KAAK,IAAL,CAAU,EAAV,CAAP;AACH;;AAED,mBAAO,IAAP;AACH;AAPE;AA3B+B,CAA1C;;AAsCA,OAAO,OAAP,GAAiB,MAAjB","file":"Seasons/season.js","sourcesContent":["/**\r\n * Created by Paul on 06/08/2016.\r\n */\r\n\r\n'use strict';\r\n\r\nconst util = require('util');\r\nconst request = require('request');\r\nconst TypeOf = require('TypeOf');\r\n\r\nconst {Templates} = require('../config');\r\nconst Timed = require('../libs/timed');\r\nconst Episode = require('../Episodes/episode');\r\n\r\nfunction Season(instance, parent, data) {\r\n    if (!(this instanceof Season)) {\r\n        return new Season(instance, data);\r\n    }\r\n\r\n    Season.super_.call(this);\r\n\r\n    this.instance = instance;\r\n    this.parent = parent;\r\n    this.data = data;\r\n\r\n    return this;\r\n}\r\n\r\nutil.inherits(Season, Object);\r\n\r\nObject.defineProperties(Season.prototype, {\r\n    'complete': {\r\n        'value': function(callback) {\r\n            let requestData = Object.assign({}, Templates.GET, {\r\n                'url': Templates.URL.replace('$', `tv/${this.parent.get('id')}/season/${this.get('season_number')}`),\r\n                'qs': Object.assign({}, { 'api_key': this.instance.apikey })\r\n            });\r\n\r\n            Timed.Enforce(250, (callback) => {\r\n                request(requestData, (error, response, body) => {\r\n                    if (error) {\r\n                        return callback(error);\r\n                    }\r\n\r\n                    this.data = JSON.parse(body);\r\n                    let episodes = this.data.episodes;\r\n\r\n                    if (TypeOf.isArray(episodes)) {\r\n                        this.data.episodes = episodes.map((data) => new Episode(this.instance, this, data));\r\n                    }\r\n\r\n                    return callback(null, this);\r\n                });\r\n            }, callback);\r\n        }\r\n    },\r\n\r\n    'get': {\r\n        'value': function(id) {\r\n            if (id in this.data) {\r\n                return this.data[id];\r\n            }\r\n\r\n            return null;\r\n        }\r\n    }\r\n});\r\n\r\nmodule.exports = Season;\r\n"],"sourceRoot":"/source/"}